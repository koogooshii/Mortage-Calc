
<section class="bg-gray-900/50 rounded-lg p-6 border border-gray-700/50">
  <div class="flex justify-between items-center">
    <h3 class="text-xl font-semibold text-gray-200 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-cyan-400">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 1-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 1 3.09-3.09L12 5.25l2.846.813a4.5 4.5 0 0 1 3.09 3.09L21.75 12l-2.846.813a4.5 4.5 0 0 1-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.898 20.575 16.5 21.75l-.398-1.175a3.375 3.375 0 0 0-2.456-2.456L12.75 18l1.175-.398a3.375 3.375 0 0 0 2.456-2.456L16.5 14.25l.398 1.175a3.375 3.375 0 0 0 2.456 2.456L20.25 18l-1.175.398a3.375 3.375 0 0 0-2.456 2.456Z" />
      </svg>
      AI Strategy Advisor
    </h3>
    <button
      (click)="fetchAdvice()"
      [disabled]="isLoading()"
      class="px-4 py-2 font-semibold rounded-lg shadow-md transition-colors duration-200 flex items-center justify-center min-w-[150px]"
      [class]="'bg-' + color() + '-600 hover:bg-' + color() + '-700 disabled:bg-gray-600 disabled:cursor-wait'"
    >
      @if (isLoading()) {
        <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
      } @else {
        <span>Analyze Strategy</span>
      }
    </button>
  </div>

  @if (advice()) {
    <div class="mt-4 pt-4 border-t border-gray-700 text-gray-300 leading-relaxed prose prose-invert max-w-none prose-strong:text-white">
      <p [innerHTML]="sanitizedAdvice()"></p>
    </div>
  } @else if (!isLoading() && !error()) {
    <div class="mt-4 pt-4 border-t border-gray-700 text-gray-400">
      <p>Click "Analyze Strategy" for a creative way to pay off your mortgage faster. The AI will analyze a strategy of extending your amortization term to lower your required payment, then using that difference as an extra payment to accelerate your payoff and save on interest.</p>
    </div>
  }

  @if(error()) {
      <div class="mt-4 pt-4 border-t border-gray-700 text-red-400">
          <p><strong>Error:</strong> {{ error() }}</p>
      </div>
  }
</section>